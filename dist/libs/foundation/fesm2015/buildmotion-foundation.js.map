{"version":3,"file":"buildmotion-foundation.js","sources":["../../../../libs/foundation/src/lib/foundation.module.ts","../../../../libs/foundation/src/lib/models/service-response.model.ts","../../../../libs/foundation/src/lib/models/error-response.model.ts","../../../../libs/foundation/src/lib/models/MessageType.ts","../../../../libs/foundation/src/lib/models/ServiceContext.ts","../../../../libs/foundation/src/lib/models/ServiceMessage.ts","../../../../libs/foundation/src/lib/action-base.action.ts","../../../../libs/foundation/src/lib/models/alert-types.constants.ts","../../../../libs/foundation/src/lib/models/alert-notification.model.ts","../../../../libs/foundation/src/lib/business-provider-base.service.ts","../../../../libs/foundation/src/lib/component-base.component.ts","../../../../libs/foundation/src/lib/service-base.ts","../../../../libs/foundation/src/lib/models/service-error.model.ts","../../../../libs/foundation/src/lib/singleton-service-base.ts","../../../../libs/foundation/src/buildmotion-foundation.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule],\n})\nexport class FoundationModule {}\n","import { ServiceError } from './service-error.model';\n\nexport class ServiceResponse {\n  IsSuccess!: boolean;\n  Message!: string;\n  Data: any;\n  Errors: Array<ServiceError> = new Array<ServiceError>();\n}\n","import { ServiceResponse } from './service-response.model';\n\nexport class ErrorResponse extends ServiceResponse {\n  Exception!: Error;\n\n  constructor() {\n    super();\n    this.IsSuccess = false;\n  }\n}\n","/**\n * Use to indicate the type for the [ServiceMessage].\n */\nexport enum MessageType {\n  /**\n   * Use to indicate the message type is informational.\n   */\n  Information = 1,\n\n  /**\n   * Use to indicate the message type is warning.\n   */\n  Warning = 2,\n\n  /**\n   * Use to indicate the message type is error.\n   */\n  Error = 3,\n}\n","import { ServiceMessage } from './ServiceMessage';\nimport { MessageType } from './MessageType';\nimport { Injectable } from '@angular/core';\n\n/**\n * Use this class to manage the context of a single service call. This\n * class will contain a list of any service messages added during the processing\n * of a service request.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ServiceContext {\n  /**\n   * A list of service messages added by the application during the processing of the\n   * specified service request.\n   */\n  Messages: Array<ServiceMessage> = new Array<ServiceMessage>();\n\n  /**\n   * Use this method to add a new message to the [ServiceContext].\n   */\n  addMessage(message: ServiceMessage) {\n    this.Messages.push(message);\n  }\n\n  /**\n   * Use to determine if the current [ServiceContext] contains any messages with type of [Error].\n   */\n  hasErrors(): boolean {\n    if (this.Messages && this.Messages.length > 0) {\n      const errorMessages = this.Messages.filter((f) => f.MessageType === MessageType.Error);\n      if (errorMessages.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Use to determine if the current [ServiceContext] does not contain any errors.\n   */\n  isGood(): boolean {\n    if (this.Messages && this.Messages.length > 0) {\n      const errorMessages = this.Messages.filter((f) => f.MessageType === MessageType.Error);\n      if (errorMessages.length > 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import { MessageType } from './MessageType';\n\n/**\n * Use this class to create a message for the current [ServiceContext].\n */\nexport class ServiceMessage {\n  /** Use to specify the name of the message. */\n  Name: string;\n\n  /** Use to specify the message. */\n  Message: string;\n\n  /** Use to specify  */\n  MessageType: MessageType = MessageType.Information;\n\n  /** Use to indicate the source of the message. */\n  Source = '';\n\n  /** Use to indicate if the specified message should be displayed to the user. */\n  DisplayToUser = false;\n\n  /**\n   * The constructor for the [ServiceMessage].\n   * @param name The name of the message.\n   * @param message The display text of the message.\n   * @param messageType: Indicates the type of message.\n   * @param source: Indicates the source of the message.\n   * @param displayToUser: Indicates if the message is displayable.\n   */\n\n  constructor(name: string, message?: string, messageType?: MessageType, source?: string);\n  /**\n   * The constructor for the [ServiceMessage].\n   * @param name The name of the message.\n   * @param message The display text of the message.\n   * @param messageType: Indicates the type of message.\n   * @param source: Indicates the source of the message.\n   */\n  constructor(name: string, message: string, messageType?: MessageType, source?: string);\n  /**\n   *\n   * @param name The name of the message.\n   * @param message The display text of the message.\n   * @param messageType: Indicates the type of message.\n   * @param source: Indicates the source of the message.\n   * @param displayToUser Use to indicate if the specified message should be displayed to the user.\n   */\n  constructor(name: string, message: string, messageType?: MessageType, source?: string, displayToUser = false) {\n    this.Name = name;\n    this.Message = message;\n    if (message) {\n      this.MessageType = messageType as MessageType;\n    }\n    if (source) {\n      this.Source = source as string;\n    }\n    this.DisplayToUser = displayToUser;\n  }\n\n  /**\n   * Use this extension method to add the name of the message.\n   * @param name The name of the service message.\n   */\n  WithName(name: string) {\n    this.Name = name;\n    return this;\n  }\n\n  /**\n   * Use this extension method to add the message text to the ServiceMessage item.\n   * @param message The display text of the service message.\n   */\n  WithMessage(message: string) {\n    this.Message = message;\n    return this;\n  }\n\n  /**\n   * Use this extension method to set the [MessageType] of the ServiceMessage item.\n   * @param messageType: Use to indicate the message type.\n   */\n  WithMessageType(messageType: MessageType) {\n    this.MessageType = messageType;\n    return this;\n  }\n\n  /**\n   * Use this extension method to set the [Source] of the ServiceMessage item.\n   * @param source: Use to indicate the source of the message.\n   */\n  WithSource(source: string) {\n    this.Source = source;\n    return this;\n  }\n\n  /**\n   * Use this extension method to set the [DisplayToUser] indicator of the ServiceMessage.\n   * @param displayToUser: A boolean value to indicate if the message can be displayed to the user.\n   */\n  WithDisplayToUser(displayToUser: boolean) {\n    this.DisplayToUser = displayToUser;\n    return this;\n  }\n\n  /**\n   * Use this method return a string representing the ServiceMessage.\n   */\n  toString() {\n    return `Name: ${this.Name}; Message: ${this.Message}; MessageType: ${this.MessageType.toString()}; Source: ${this.Source}; DisplayToUser: ${this.DisplayToUser}`;\n  }\n}\n","import { Action, ActionResult } from '@buildmotion/actions';\nimport { ApiMessage, ApiMessageType, ApiResponse } from '@buildmotion/core';\nimport { Severity, ILoggingService } from '@buildmotion/logging';\nimport { CompositeRule, RuleResult, ValidationContext } from '@buildmotion/rules-engine';\nimport { Observable, of, throwError } from 'rxjs';\nimport { ErrorResponse } from './models/error-response.model';\nimport { MessageType } from './models/MessageType';\nimport { ServiceContext } from './models/ServiceContext';\nimport { ServiceMessage } from './models/ServiceMessage';\n\n/**\n * This is the application's base Action class that provides implementation of pipeline methods - pre/post\n * execution methods.\n *\n * The pre-execute methods that can be implemented are:\n *\t\t1. start();\n *\t\t2. audit();\n *\t\t3. preValidateAction();\n *\t\t4. evaluateRules();\n *\t\t5. postValidateAction();\n *\t\t6. preExecuteAction();\n *\n *If the status of action is good, the business logic will be executed using the:\n *\t\t1. processAction();\n *\n * The post-execution methods that can be implemented are:\n *\t\t1. postExecuteAction();\n *\t\t2. validateActionResult();\n *\t\t3. finish();\n */\nexport class ActionBase<T> extends Action {\n  serviceContext: ServiceContext = new ServiceContext();\n  response: Observable<T> | any = this.createUnknownResponse();\n  loggingService?: ILoggingService;\n  actionName!: string;\n\n  constructor(actionName?: string) {\n    super();\n    this.actionName = actionName ?? '';\n  }\n\n  start() {\n    // this.loggingService?.log(\n    //   this.actionName,\n    //   Severity.Information,\n    //   `Preparing to [start] action.`\n    // );\n  }\n\n  audit() {\n    this.loggingService?.log(this.actionName, Severity.Information, `Preparing to [audit] action.`);\n  }\n\n  createUnknownResponse(): Observable<any> | any {\n    const response = new ApiResponse();\n    return of(response);\n  }\n\n  preExecuteAction() {\n    this.loggingService?.log(this.actionName, Severity.Information, `Preparing to [preExecuteAction] action.`);\n  }\n\n  performAction() {\n    this.loggingService?.log(this.actionName, Severity.Information, `Preparing to perform [${this.actionName}].`);\n  }\n\n  preValidateAction() {\n    this.loggingService?.log(this.actionName, Severity.Information, `Preparing to preValidateAction [${this.actionName}].`);\n  }\n\n  finish() {\n    this.loggingService?.log(this.actionName, Severity.Information, `Preparing to [finish] action.`);\n  }\n\n  /**\n   * This is a required implementation if you want to render/execute the rules that\n   * are associated to the specified action.\n   */\n  validateAction(): ValidationContext {\n    return this.validationContext.renderRules();\n  }\n\n  postValidateAction() {\n    this.loggingService?.log(this.actionName, Severity.Information, `Preparing to determine if the action contains validation errors in ${this.actionName}`);\n\n    if (this.validationContext.hasRuleViolations()) {\n      this.loggingService?.log(this.actionName, Severity.Information, `The target contains validation errors in ${this.actionName}`);\n\n      // Load the error/rule violations into the ServiceContext so that the information bubbles up to the caller of the service;\n      this.validationContext.results.forEach((result) => {\n        if (!result.isValid) {\n          this.publishRuleResult(result);\n          this.retrieveRuleDetails(result);\n        }\n      });\n\n      this.response = this.createFailResponse();\n    }\n  }\n\n  createFailResponse(): Observable<ApiResponse<T>> {\n    const apiResponse = new ApiResponse<T>();\n    apiResponse.isSuccess = false;\n    apiResponse.message = `Request failed.`;\n\n    const messages = new Array<ApiMessage>();\n    if (this.serviceContext.hasErrors() && this.serviceContext.Messages.length > 0) {\n      this.serviceContext.Messages.map((m) => {\n        const error = new ApiMessage();\n        error.message = m.Message;\n        error.messageType = ApiMessageType.Error;\n        error.code = m.Name;\n\n        messages.push(error);\n      });\n    }\n    apiResponse.messages = messages.length > 0 ? messages : [];\n    return of(apiResponse);\n  }\n\n  postExecuteAction() {\n    if (this.actionResult === ActionResult.Fail) {\n      this.serviceContext.Messages.forEach((e) => {\n        if (e.MessageType === MessageType.Error) {\n          this.loggingService?.log(this.actionName, Severity.Error, e.toString());\n        }\n      });\n    }\n  }\n\n  /**\n   * All concrete actions must override and implement this method. It is defined in the [Action] framework class.\n   */\n  validateActionResult(): ActionResult {\n    this.loggingService?.log(this.actionName, Severity.Information, `Running [validateActionResult] for ${this.actionName}.`);\n    // determine the status of the action based on any rule violations;\n    if (this.validationContext.hasRuleViolations()) {\n      this.loggingService?.log(this.actionName, Severity.Error, `The ${this.actionName} contains rule violations.`);\n      this.actionResult = ActionResult.Fail;\n\n      const errorResponse = new ErrorResponse();\n      errorResponse.IsSuccess = false;\n      errorResponse.Message = `Validation errors exist.`;\n      this.response = throwError(errorResponse);\n    }\n    this.actionResult = this.serviceContext.isGood() ? ActionResult.Success : ActionResult.Fail;\n    return this.actionResult;\n  }\n\n  /**\n   * Use to process rule results for composite rules. Note, that this function is recursive\n   * and will process all composite rules in the rule set contained in the ValidationContext.\n   * @param ruleResult The result of a rendered rule.\n   */\n  retrieveRuleDetails(ruleResult: RuleResult) {\n    if (ruleResult.rulePolicy instanceof CompositeRule) {\n      const composite = ruleResult.rulePolicy as CompositeRule;\n      if (composite && composite.hasErrors) {\n        const errors = composite.results.filter((result) => !result.isValid && result.rulePolicy && result.rulePolicy.isDisplayable);\n\n        errors.forEach((errorResult) => {\n          this.publishRuleResult(errorResult);\n\n          if (errorResult.rulePolicy instanceof CompositeRule) {\n            this.retrieveRuleDetails(errorResult);\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * A helper function to publish a new [ServiceMessage] to the [ServiceContext.Messages] list.\n   * @param ruleResult\n   */\n  publishRuleResult(ruleResult: RuleResult) {\n    const serviceMessage = new ServiceMessage(ruleResult.rulePolicy.name, ruleResult.rulePolicy.message, MessageType.Error);\n    serviceMessage.DisplayToUser = ruleResult.rulePolicy.isDisplayable;\n    serviceMessage.Source = this.actionName;\n\n    this.serviceContext.Messages.push(serviceMessage);\n    this.loggingService?.log(this.actionName, Severity.Error, `${serviceMessage.toString()}`);\n  }\n}\n","/**\n * Use to provide the alert type information for the AlertNotification and AlertComponent.\n */\nexport class AlertTypes {\n  public static readonly Information: string = 'alert-info';\n  public static readonly Warning: string = 'alert-warning';\n  public static readonly Danger: string = 'alert-danger';\n  public static readonly Success: string = 'alert-success';\n}\n","import { AlertTypes } from './alert-types.constants';\n\nexport class AlertNotification {\n  type: string = AlertTypes.Information; // alert-warning, alert-success, alert-info, alert-danger\n  header: string;\n  title: string;\n  messages: Array<string> = new Array<string>();\n  showAlert = false;\n\n  constructor(header: string, title: string, messages?: Array<string>, type?: string) {\n    if (type) {\n      this.type = type;\n    }\n\n    this.header = header;\n    this.title = title;\n    if (messages) {\n      this.messages = messages;\n    }\n\n    if (this.header && this.title) {\n      this.showAlert = true; // used to trigger the display of the notification.\n    }\n  }\n}\n","import { LoggingService } from '@buildmotion/logging';\nimport { Severity } from '@buildmotion/logging';\nimport { MessageType } from './models/MessageType';\nimport { ServiceContext } from './models/ServiceContext';\nimport { ServiceMessage } from './models/ServiceMessage';\n\n/**\n * Use the business provider base class to access common elements of the business provider.\n *\n * serviceContext: This is initialized for each instance of a business provider - its purpose is to collect information during the processing of business logic.\n */\nexport class BusinessProviderBase {\n  providerName: string;\n  serviceContext!: ServiceContext;\n  accessToken!: string;\n\n  constructor(providerName: string, public loggingService: LoggingService) {\n    this.providerName = providerName;\n    this.loggingService.log(\n      this.providerName,\n      Severity.Information,\n      `Running constructor for the [${this.providerName}].`\n    );\n  }\n\n  /**\n   * Use to handle an unexpected error in the application. The error should implement\n   * the specified interface. The method will add a new [ServiceMessage] to the\n   * specified [ServiceContext].\n   * @param error An unexpected application error that implements the [Error] interface.\n   *\n   * interface Error {\n   *  name: string;\n   *  message: string;\n   *  stack?: string;\n   * }\n   */\n  handleUnexpectedError(error: Error): void {\n    const message = new ServiceMessage(error.name, error.message)\n      .WithDisplayToUser(true)\n      .WithMessageType(MessageType.Error)\n      .WithSource(this.providerName);\n\n    const logItem = `${message.toString()}; ${error.stack}`;\n    this.loggingService.log(this.providerName, Severity.Error, logItem);\n\n    this.serviceContext.addMessage(message);\n  }\n\n  finishRequest(sourceName: string): void {\n    this.loggingService.log(\n      this.providerName,\n      Severity.Information,\n      `Request for [${sourceName}] by ${this.providerName} is complete.`\n    );\n    if (this.serviceContext.hasErrors()) {\n      this.loggingService.log(\n        this.providerName,\n        Severity.Information,\n        `Preparing to write out the errors.`\n      );\n      this.serviceContext.Messages.filter(\n        (f) => f.DisplayToUser && f.MessageType === MessageType.Error\n      ).forEach((e) =>\n        this.loggingService.log(this.providerName, Severity.Error, e.toString())\n      );\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Inject, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormGroup } from '@angular/forms';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { LoggingService, Severity } from '@buildmotion/logging';\nimport { Guid } from 'guid-typescript';\nimport { Subscription } from 'rxjs';\nimport { AlertNotification } from './models/alert-notification.model';\nimport { AlertTypes } from './models/alert-types.constants';\nimport { ErrorResponse } from './models/error-response.model';\nimport { MessageType } from './models/MessageType';\nimport { ServiceContext } from './models/ServiceContext';\n\ndeclare global {\n  interface Window { _paq: any; }\n}\n@Inject({})\nexport class ComponentBase implements OnDestroy {\n  componentName: string;\n  alertNotification: AlertNotification;\n  navSubscription: Subscription = new Subscription();\n  currentUrl!: string;\n  previousUrl!: string;\n  id: Guid = Guid.create();\n  subscriptions: Array<Subscription> = [];\n\n  constructor(componentName: string, public loggingService: LoggingService, public router: Router) {\n    this.componentName = componentName;\n    this.alertNotification = new AlertNotification('', '');\n\n    this.loggingService.log(this.componentName, Severity.Information, `Preparing to load [${this.componentName}] component.`, [`ComponentId:${this.id}`]);\n  }\n\n  /**\n   * Add a subscription to the component\n   * @param subscription\n   */\n  subscribe(subscription: Subscription) {\n    this.subscriptions.push(subscription)\n  }\n\n  /**\n   * Unsubscribe to any registered subscriptions\n   */\n  ngOnDestroy(): void {\n    this.subscriptions.forEach((sub) => {\n      if (sub && typeof sub.unsubscribe === 'function') {\n        sub.unsubscribe();\n      }\n    });\n  }\n\n  /**\n   * Use to set the URLs for when navigation ends. Provides the values\n   * for the current and previous URL paths.\n   * @param event Is a [NavigationEnd] type.\n   */\n  private updateUrls(event: NavigationEnd) {\n    if (event.urlAfterRedirects) {\n      this.previousUrl = this.currentUrl;\n      this.currentUrl = event.urlAfterRedirects;\n    }\n  }\n\n  /**\n   * Use to send an analytic event to [Google Analytics].\n   * @param category A category is a name that you supply as a way to group objects that you want to track. Typically,\n   * you will use the same category name multiple times over related UI elements that you want to group under a given category.\n   * @param action Use the action parameter to name the type of event or interaction you want to track for a particular\n   * web object (i.e., play, stop, pause, download). A unique event is determined by a unique action name. You can use\n   * duplicate action names across categories, but this can affect how unique events are calculated. See the suggestions\n   * below and the Implicit Count section for more details.\n   * @param label Provide additional information for events that you want to track, such as the movie title in the\n   * video examples above, or the name of a file when tracking downloads. All labels are listed independently from\n   * their parent categories and actions. This provides you with another useful way to segment the event data for\n   * your reports. All labels are listed independently from their parent categories and actions. This provides you\n   * with another useful way to segment the event data for your reports.\n   * @param value Any numeric value indicating a [value] that will be summarized for the analytic item(s).\n   *\n   * More information at: https://support.google.com/analytics/answer/1033068\n   * or https://developers.google.com/analytics/devguides/collection/analyticsjs/events\n   */\n  public googleAnalyticsSendEvent(category: string, action: string, label: string, value: number) {\n    (<any>window).gtag('event', action, {\n      event_category: category,\n      event_label: label,\n      value: value,\n    });\n  }\n\n\n\n  /**\n   * Use to create a simple [ErrorResponse] with the specified message.\n   * @param message The message to display to the user.\n   */\n  createErrorResponse(message: string): ErrorResponse {\n    this.loggingService.log(this.componentName, Severity.Information, `Preparing to create error response for component.`);\n    const errorResponse: ErrorResponse = new ErrorResponse();\n    errorResponse.Message = message;\n    return errorResponse;\n  }\n\n  /**\n   * Use to handle service errors. These are error response [See: ErrorResponse] from\n   * the application business layers (Action(s) or Http) that will bubble up to the\n   * caller (i.e., a component) in a specified format:\n   *\n   * IsSuccess = false; // default for ErrorResponse\n   * Message: string;\n   * Errors: Array<ServiceError> = new Array<ServiceError>();\n   * Exception: any;\n   */\n  handleServiceErrors(errorResponse: ErrorResponse, serviceContext?: ServiceContext) {\n    this.loggingService.log(this.componentName, Severity.Information, `Preparing to handle service errors for component.`);\n    if (serviceContext && serviceContext.hasErrors()) {\n      this.loggingService.log(this.componentName, Severity.Information, `Retrieving error messages from the ServiceContext/ValidationContext;`);\n      const messages = this.retrieveServiceContextErrorMessages(serviceContext);\n      this.alertNotification = new AlertNotification('Errors', errorResponse.Message, messages, AlertTypes.Warning);\n    } else {\n      if (errorResponse && errorResponse.Message) {\n        this.loggingService.log(this.componentName, Severity.Information, `Retrieving error messages from the [ErrorResponse].`);\n        const errors = this.retrieveResponseErrorMessages(errorResponse);\n        this.alertNotification = new AlertNotification('Error', errorResponse.Message, errors, AlertTypes.Warning);\n        this.loggingService.log(this.componentName, Severity.Error, `Error: ${errorResponse.Message}`);\n      }\n    }\n  }\n\n  /**\n   * Use to mark the form as touched; includes all form controls;\n   */\n  protected markFormAsTouched(form: FormGroup) {\n    form.markAsTouched({ onlySelf: false });\n\n    (<any>Object).values(form.controls).forEach((control: AbstractControl) => {\n      control.markAsTouched();\n    });\n  }\n\n  /**\n   * Use to log an unexpected error.\n   */\n  protected logError(error: any, message: string) {\n    if (error instanceof Error) {\n      this.loggingService.log(this.componentName, Severity.Error, message, [`${error.stack}`]);\n    } else {\n      this.loggingService.log(this.componentName, Severity.Error, message);\n    }\n  }\n\n  /**\n   * Use to retrieve the error messages from the specified [ServiceContext].\n   *\n   * @parm: serviceContext: A context object containing messages for the specified request.\n   */\n  retrieveServiceContextErrorMessages(serviceContext: ServiceContext): Array<string> {\n    const messages = Array<string>();\n    serviceContext.Messages.forEach((e) => {\n      if (e.MessageType === MessageType.Error && e.DisplayToUser) {\n        messages.push(e.Message);\n      }\n    });\n    return messages;\n  }\n\n  /**\n   * Use to retrieve the error messages from the specified Web API response.\n   */\n  retrieveResponseErrorMessages(errorResponse: ErrorResponse) {\n    const errors = new Array<string>();\n    if (errorResponse && errorResponse.Errors) {\n      errorResponse.Errors.forEach((e) => {\n        if (e.DisplayToUser) {\n          errors.push(e.Message);\n        }\n      });\n    }\n    return errors;\n  }\n\n  /**\n   * Use to reset the [AlertNotification] to the initial state. Removes\n   * existing messages and hides the AlertComponent.\n   */\n  resetAlertNotifications() {\n    this.alertNotification = new AlertNotification('', '');\n  }\n\n  /**\n   * Use to navigate to the specified route.\n   * @parm routeName The name of the target route.\n   */\n  public routeTo(routeName: string) {\n    try {\n      this.router.navigate([routeName]);\n    } catch (error) {\n      this.loggingService.log(\n        this.componentName,\n        Severity.Error,\n        `Error while attempting to navigate to [${routeName}] route from ${this.componentName}. Error: ${error.toString()}`\n      );\n    }\n  }\n\n  /**\n   * Use to retrieve and show any response error messages.\n   */\n  showResponseErrors(response: ErrorResponse) {\n    this.handleServiceErrors(response, undefined);\n  }\n\n  finishRequest(message: string): void {\n    this.loggingService.log(this.componentName, Severity.Information, `${this.componentName}: ${message}`);\n  }\n\n  protected showAlertMessage(message: string): void {\n    alert(message);\n  }\n}\n","import { Inject, OnDestroy } from '@angular/core';\nimport { ApiResponse } from '@buildmotion/core';\nimport { ILoggingService, LoggingService, Severity } from '@buildmotion/logging';\nimport { Guid } from 'guid-typescript';\nimport { Observable, of, Subscription } from 'rxjs';\nimport { ErrorResponse } from './models/error-response.model';\nimport { MessageType } from './models/MessageType';\nimport { ServiceContext } from './models/ServiceContext';\nimport { ServiceMessage } from './models/ServiceMessage';\n\n/**\n * Use the [ServiceBase] to provide common behavior for Angular\n * services.\n */\n@Inject({})\nexport class ServiceBase implements OnDestroy {\n  accessToken = '';\n  id: string = Guid.create().toString();\n  private subscriptions: Array<Subscription> = [];\n\n  /**\n   * Use the constructor to provide required elements to the base class.\n   *\n   * @param loggingService The [LoggingService] is a required dependency of this\n   * class. It should be injected into any Angular Services that extend from\n   * this base class. It will allow the members of the base class to log information\n   * using the common LoggingService.\n   */\n  constructor(\n    public serviceName: string,\n    @Inject(LoggingService) public loggingService: ILoggingService,\n    public serviceContext: ServiceContext) {\n    this.loggingService.log(this.serviceName, Severity.Information, `Initializing ${this.serviceName} at ${Date.now()} with id: ${this.id}`);\n  }\n\n  /**\n   * Use to extract the contents of the HTTP body and return a JSON\n   * representation of the data.\n   * @param response: contains the HTTP response.\n   */\n  extractData(response: Response) {\n    const body = response.json();\n    return body || {};\n  }\n\n  /**\n   * Use to handle an unexpected error in the application. The error should implement\n   * the specified interface. The method will add a new [ServiceMessage] to the\n   * specified [ServiceContext].\n   * @param error An unexpected application error that implements the [Error] interface.\n   *\n   * interface Error {\n   *  name: string;\n   *  message: string;\n   *  stack?: string;\n   * }\n   */\n  handleUnexpectedError(error: Error): void {\n    const message = new ServiceMessage(error.name, error.message).WithDisplayToUser(false).WithMessageType(MessageType.Error).WithSource(this.serviceName);\n\n    const tags: string[] = [`${this.serviceName}`];\n    const logItem = `${message.toString()}; ${error.stack}`;\n    this.loggingService.log(this.serviceName, Severity.Error, logItem, tags);\n\n    this.serviceContext.addMessage(message);\n  }\n\n  /**\n   * Use to handle an error that contains a [name] and a [message].\n   * @param error\n   */\n  handleError(error: { name: string; message: string | undefined }): void {\n    const message = new ServiceMessage(error.name, error.message).WithDisplayToUser(false).WithMessageType(MessageType.Error).WithSource(this.serviceName);\n    const tags: string[] = [`${this.serviceName}`];\n    this.loggingService.log(this.serviceName, Severity.Error, message.toString(), tags);\n    this.serviceContext.addMessage(message);\n  }\n\n  /**\n   * Use to create a new [ErrorResponse] with the specified message.\n   * @param message The message for the specified [ErrorResponse].\n   */\n  createErrorResponse(message: string): ErrorResponse {\n    const response: ErrorResponse = new ErrorResponse();\n    response.Message = message;\n    return response;\n  }\n\n  /**\n   * Use to create a API Response.\n   *\n   * @param message a simple message related to the operation (not for user notifications).\n   * @param data the data payload (if any) for the response.\n   * @returns Observable<ApiResponse<T>>\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  createAPIResponse<T>(message: string, data?: any, isSuccess = true): Observable<ApiResponse<T>> {\n    const response: ApiResponse<T> = {\n      id: Guid.create().toString(),\n      isSuccess: isSuccess,\n      data: data,\n      message,\n      messages: [],\n      timestamp: new Date()\n    }\n    return of(response);\n  }\n\n  /**\n   * Use a generic method to finish service requests that return [Observables].\n   * @param sourceName\n   */\n  finishRequest(sourceName: string): void {\n    this.loggingService.log(this.serviceName, Severity.Information, `Request for [${sourceName}] by ${this.serviceName} is complete.`);\n    if (this.serviceContext.hasErrors()) {\n      this.loggingService.log(this.serviceName, Severity.Information, `Preparing to write any messages.`);\n      this.serviceContext.Messages.filter((f) => f.MessageType === MessageType.Error && f.DisplayToUser).forEach((e) =>\n        this.loggingService.log(this.serviceName, Severity.Error, e.toString())\n      );\n    }\n  }\n\n  logError(error: any, errorMessage: string) {\n    this.loggingService.log(this.serviceName, Severity.Error, `${errorMessage}; Error: ${error.message}`);\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribeAllSubscriptions()\n  }\n\n  /**\n   * Use to reset the service context when you want to clear messages from the [ServiceContext]. If you want to\n   * append messages from subsequent service calls, do not use this method.\n   */\n  resetServiceContext() {\n    this.loggingService.log(this.serviceName, Severity.Information, `Preparing to reset the Messages of the current [ServiceContext].`);\n    if (this.serviceContext && this.serviceContext.Messages) {\n      if (this.serviceContext.Messages.length > 0) {\n        this.loggingService.log(this.serviceName, Severity.Information, `Resetting the Messages of the current [ServiceContext].`);\n        this.serviceContext.Messages = new Array<ServiceMessage>();\n      } else {\n        this.loggingService.log(this.serviceName, Severity.Information, `The current [ServiceContext] does not contain any [Messages].`);\n      }\n    } else {\n      this.loggingService.log(this.serviceName, Severity.Warning, `The current [ServiceContext] is not valid.`);\n    }\n    this.loggingService.log(this.serviceName, Severity.Information, `Finished  processing request to [reset] the Messages of the current [ServiceContext].`);\n  }\n\n  /**\n   * Register a Subscription\n   * @param subscription\n   */\n  subscribe(subscription: Subscription) {\n    this.subscriptions.push(subscription);\n  }\n\n  /**\n   * Unsubscribe all Subjections\n   */\n  unsubscribeAllSubscriptions() {\n    this.subscriptions.forEach((sub) => {\n      if (sub && typeof sub.unsubscribe === 'function') {\n        sub.unsubscribe();\n      }\n    })\n  }\n\n  /**\n   * Use to write the current messages contained in the [ServiceContext]. Written messages are limited\n   * to items that are marked as [DisplayToUser = true].\n   */\n  writeMessages() {\n    if (this.serviceContext && this.serviceContext.Messages) {\n      this.serviceContext.Messages.forEach((e) => {\n        if (e.MessageType === MessageType.Error && e.DisplayToUser) {\n          this.loggingService.log(this.serviceName, Severity.Error, e.toString());\n        }\n      });\n    }\n  }\n}\n","/**\n * Use this model to represent service error/message information from the\n * application's service APIs.\n *\n * The DisplayToUser boolean value indicates whether the message should be\n * displayed to the user if desired.\n */\nexport class ServiceError {\n  DisplayToUser!: boolean;\n  Exception: any;\n  Message!: string;\n  Name!: string;\n  Source!: string;\n  Target!: string;\n}\n","import { Type, inject, InjectFlags } from '@angular/core';\nimport { ServiceBase } from './service-base';\nimport { LoggingService } from '@buildmotion/logging';\nimport { ServiceContext } from './models/ServiceContext';\n\nexport class SingletonServiceBase extends ServiceBase {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(type: Type<any>, loggingService: LoggingService, serviceName: string, serviceContext: ServiceContext) {\n    super(serviceName, loggingService, serviceContext);\n    // eslint-disable-next-line no-bitwise\n    const parent = inject(type, InjectFlags.Optional | InjectFlags.SkipSelf);\n    if (parent) {\n      throw Error(`Cannot create multiple instances of provider: [${type}]`);\n    }\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}